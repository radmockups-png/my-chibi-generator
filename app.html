<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>My Chibi Generator</title>
<style>
  :root{
    --bg:#14081f;--panel:#1c0f2a;--ink:#f4eaff;--muted:#c9a7f5;--accent:#a78bfa;
  }
  html,body{height:100%}
  body{
    margin:0;background:linear-gradient(180deg,#10061a,#14081f 60%);
    color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
  }
  .wrap{max-width:980px;margin:40px auto;padding:0 16px}
  .by{display:inline-block;font-size:12px;color:var(--muted);border:1px solid #2a1b3a;
      padding:6px 10px;border-radius:999px;opacity:.9}
  h1{margin:.8rem 0 1rem;font-size:28px;font-weight:800;letter-spacing:.3px}
  .sub{color:var(--muted);font-size:13px;margin-bottom:18px}
  .panel{background:var(--panel);border:1px solid #2a1b3a;border-radius:16px;padding:16px 16px 6px;box-shadow:0 10px 40px rgba(0,0,0,.35)}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
  .row{display:flex;gap:12px}
  label{display:block;font-size:12px;color:var(--muted);margin:6px 0 6px 2px}
  select,input[type="text"],textarea{
    width:100%;background:#12091a;color:var(--ink);border:1px solid #2a1b3a;
    border-radius:10px;padding:12px 12px;font-size:14px;outline:none;
  }
  textarea{min-height:110px;resize:vertical}
  .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .btn{
    appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:700;
    cursor:pointer;transition:.15s transform ease, .15s opacity ease;
    color:#fff;user-select:none
  }
  .btn:active{transform:translateY(1px)}
  .primary{background:#7c3aed}
  .generate{background:linear-gradient(90deg,#7c3aed,#db2777)}
  .preset{background:#a78bfa;color:#1b1030}
  .download{background:#10b981}
  .ghost{background:transparent;border:1px dashed #3a2852;color:var(--muted)}
  .out{margin-top:14px}
  .muted{font-size:12px;color:var(--muted)}
  .badge{font-size:11px;padding:3px 8px;border-radius:999px;border:1px solid #3a2852;color:var(--muted)}
  .hr{height:1px;background:#2a1b3a;margin:16px 0}
  .stack{display:flex;flex-direction:column;gap:12px}
  .presetsbar{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0}
  .chip{background:#29163f;border:1px solid #3b2960;color:#e9ddff;padding:8px 12px;border-radius:999px;font-size:13px;cursor:pointer}
  .chip:hover{background:#321e4c}
  .right{margin-left:auto}
  .footer{margin:28px 0 40px;color:#9d86d8;font-size:12px;text-align:center}
</style>
</head>
<body>

<div class="wrap">
  <span class="by">by YourBrand</span>
  <h1>Chibi Character Generator</h1>
  <p class="sub">Switch Male/Female, add extras, choose options ‚Üí press <b>Generate Prompt</b>. Use a preset if you like.</p>

  <!-- Presets -->
  <div class="panel">
    <div class="row" style="align-items:center">
      <span class="badge">Presets</span>
      <span class="muted">Click any preset to auto-fill options (you can still edit).</span>
      <button class="btn ghost right" id="clearAll">Clear</button>
    </div>

    <div class="presetsbar" id="presetBar"></div>

    <div class="hr"></div>

    <!-- Extras -->
    <div class="stack">
      <div>
        <label>Extra Prompt Text (optional)</label>
        <input type="text" id="extra" placeholder="e.g., Halloween theme, cyberpunk poster, graffiti vibe">
      </div>
      <div>
        <label>Negative Prompt (optional)</label>
        <input type="text" id="neg" placeholder="e.g., blurry, watermark, extra fingers, low-res, text, logo">
      </div>
    </div>

    <div class="hr"></div>

    <!-- Form -->
    <div class="grid">
      <div>
        <label>Character Type</label>
        <select id="gender">
          <option>Male Chibi</option>
          <option>Female Chibi</option>
        </select>
      </div>
      <div>
        <label>Style</label>
        <input type="text" id="style" value="Chibi">
      </div>

      <div>
        <label>Age</label>
        <select id="age">
          <option value="">‚Äî optional ‚Äî</option>
          <option>kid</option><option>teen</option><option>young adult</option>
          <option>adult</option><option>older adult</option>
        </select>
      </div>
      <div>
        <label>Skin tone</label>
        <select id="skin">
          <option value="">‚Äî optional ‚Äî</option>
          <option>porcelain</option><option>fair</option><option>light</option>
          <option>medium</option><option>olive</option><option>tan</option>
          <option>brown</option><option>deep</option>
        </select>
      </div>

      <div>
        <label>Hair</label>
        <select id="hair">
          <option value="">‚Äî optional ‚Äî</option>
          <option>twists/locs</option><option>buzz cut</option><option>fauxhawk</option>
          <option>undercut</option><option>wavy bob</option><option>long straight bangs</option>
          <option>spiky anime</option><option>space buns</option><option>curly afro</option>
          <option>braided pigtails</option><option>ponytail</option>
        </select>
      </div>
      <div>
        <label>Outfit</label>
        <select id="outfit">
          <option value="">‚Äî optional ‚Äî</option>
          <option>tracksuit</option><option>streetwear</option><option>school uniform</option>
          <option>fantasy armor</option><option>ninja hoodie & mask</option>
          <option>pastel cardigan + pleated skirt</option>
          <option>oversized tee + cargo pants</option>
          <option>hoodie + joggers</option><option>kimono-inspired</option>
          <option>cyberpunk jacket</option>
        </select>
      </div>

      <div>
        <label>Shoes</label>
        <select id="shoes">
          <option value="">‚Äî optional ‚Äî</option>
          <option>Jordan 4</option><option>high-top sneakers</option><option>chunky sneakers</option>
          <option>combat boots</option><option>slip-on skaters</option><option>lace-up boots</option>
          <option>Mary Janes</option><option>platform sneakers</option>
        </select>
      </div>
      <div>
        <label>Pose</label>
        <select id="pose">
          <option value="">‚Äî optional ‚Äî</option>
          <option>cross-armed, confident</option><option>hands-in-pockets, relaxed</option>
          <option>peace sign, cheerful</option><option>one hand on hip, playful</option>
          <option>dynamic jump pose</option>
        </select>
      </div>

      <div>
        <label>Background</label>
        <select id="bg">
          <option value="">‚Äî optional ‚Äî</option>
          <option>studio gradient</option><option>neon alley</option><option>city rooftop</option>
          <option>arcade room</option><option>cloudy pastel sky</option><option>cherry blossoms</option>
        </select>
      </div>
      <div>
        <label>Lighting</label>
        <select id="light">
          <option value="">‚Äî optional ‚Äî</option>
          <option>soft studio</option><option>dramatic rim light</option>
          <option>neon glow</option><option>warm golden hour</option>
          <option>cool moonlight</option>
        </select>
      </div>

      <div>
        <label>Color Palette</label>
        <select id="palette">
          <option value="">‚Äî optional ‚Äî</option>
          <option>vibrant neons</option><option>pastel candy</option><option>earth tones</option>
          <option>black & purple</option><option>sunset orange & pink</option>
        </select>
      </div>
      <div>
        <label>Camera Angle</label>
        <select id="camera">
          <option value="">‚Äî optional ‚Äî</option>
          <option>eye-level, centered</option><option>slight low-angle hero</option>
          <option>three-quarter view</option><option>close-up portrait</option>
        </select>
      </div>

      <div>
        <label>Expression / Mood</label>
        <select id="mood">
          <option value="">‚Äî optional ‚Äî</option>
          <option>confident smirk</option><option>big smile</option>
          <option>mischievous</option><option>calm & serene</option>
          <option>determined</option>
        </select>
      </div>
      <div></div>
    </div>

    <div class="controls">
      <button class="btn generate" id="genBtn">‚ö° Generate Prompt</button>
      <button class="btn primary" id="copyBtn">üìã Copy</button>
      <button class="btn download" id="dlBtn">‚¨áÔ∏è Download .txt</button>
      <button class="btn ghost" id="shareBtn">üîó Share link</button>
      <span class="muted right" id="status"></span>
    </div>

    <div class="out">
      <label> Your Character Prompt </label>
      <textarea id="out"></textarea>
      <div class="muted">If you still don‚Äôt see the prompt, your paste got truncated‚Äîrepeat then replace bits.</div>
    </div>
  </div>

  <div class="footer">¬© YourBrand ‚Äî Chibi Prompt Generator</div>
</div>

<script>
/* ---------- Auth gate (respect login) ---------- */
if (!(localStorage.getItem("chibi_auth") || sessionStorage.getItem("chibi_auth"))) {
  location.href = "index.html";
}

/* ---------- Helper: DOM ---------- */
const $ = id => document.getElementById(id);

/* ---------- Presets (add as many as you like) ---------- */
const PRESETS = [
  // MALE
  {id:"zeke",label:"‚≠ê Zeke Trouble (Male)", gender:"Male Chibi",
   age:"young adult", skin:"light", hair:"twists/locs", shoes:"Jordan 4",
   outfit:"tracksuit", pose:"cross-armed, confident", bg:"studio gradient",
   light:"soft studio", palette:"vibrant neons", camera:"eye-level, centered",
   mood:"confident smirk",
   extra:"clean studio gradient, flat cell shading, bold lines",
   neg:"blurry, watermark, extra fingers, low-res, text, logo"},
  {id:"milo",label:"Milo (Male)", gender:"Male Chibi",
   age:"teen", skin:"medium", hair:"spiky anime", shoes:"high-top sneakers",
   outfit:"hoodie + joggers", pose:"peace sign, cheerful", bg:"arcade room",
   light:"neon glow", palette:"black & purple", camera:"three-quarter view",
   mood:"mischievous", extra:"arcade neon highlights, glossy eyes, 300 DPI",
   neg:"text, logo, heavy blur"},
  {id:"axel",label:"Axel (Male)", gender:"Male Chibi",
   age:"adult", skin:"tan", hair:"undercut", shoes:"combat boots",
   outfit:"cyberpunk jacket", pose:"hands-in-pockets, relaxed", bg:"neon alley",
   light:"dramatic rim light", palette:"vibrant neons", camera:"slight low-angle hero",
   mood:"determined", extra:"futuristic signage, crisp lineart", neg:"watermark, text"},

  // FEMALE
  {id:"honey",label:"‚≠ê Honey (Female)", gender:"Female Chibi",
   age:"young adult", skin:"fair", hair:"space buns", shoes:"platform sneakers",
   outfit:"pastel cardigan + pleated skirt", pose:"one hand on hip, playful",
   bg:"cloudy pastel sky", light:"warm golden hour", palette:"pastel candy",
   camera:"three-quarter view", mood:"big smile",
   extra:"sparkles, soft bloom, kawaii stickers",
   neg:"blurry, text, harsh shadows"},
  {id:"aria",label:"Aria (Female)", gender:"Female Chibi",
   age:"teen", skin:"olive", hair:"wavy bob", shoes:"Mary Janes",
   outfit:"school uniform", pose:"peace sign, cheerful",
   bg:"cherry blossoms", light:"soft studio", palette:"sunset orange & pink",
   camera:"close-up portrait", mood:"calm & serene",
   extra:"petal particles, clean cel shading", neg:"logo, watermark"},
  {id:"luna",label:"Luna (Female)", gender:"Female Chibi",
   age:"young adult", skin:"light", hair:"long straight bangs", shoes:"chunky sneakers",
   outfit:"oversized tee + cargo pants", pose:"hands-in-pockets, relaxed",
   bg:"city rooftop", light:"cool moonlight", palette:"black & purple",
   camera:"eye-level, centered", mood:"mischievous",
   extra:"night sky stars, subtle glow", neg:"text, extra limbs"},

  // NEUTRAL / OTHER
  {id:"nova",label:"Nova (Androgynous)", gender:"Male Chibi",
   age:"young adult", skin:"brown", hair:"fauxhawk", shoes:"slip-on skaters",
   outfit:"ninja hoodie & mask", pose:"dynamic jump pose", bg:"neon alley",
   light:"neon glow", palette:"vibrant neons", camera:"three-quarter view",
   mood:"determined", extra:"motion lines, crisp comic shading", neg:"blur, text"},
  {id:"yumi",label:"Yumi (Female)", gender:"Female Chibi",
   age:"adult", skin:"medium", hair:"braided pigtails", shoes:"lace-up boots",
   outfit:"kimono-inspired", pose:"one hand on hip, playful", bg:"studio gradient",
   light:"soft studio", palette:"earth tones", camera:"eye-level, centered",
   mood:"confident smirk", extra:"floral motifs, neat linework", neg:"watermark, text"},
  {id:"blaze",label:"Blaze (Male)", gender:"Male Chibi",
   age:"adult", skin:"deep", hair:"buzz cut", shoes:"combat boots",
   outfit:"fantasy armor", pose:"cross-armed, confident", bg:"city rooftop",
   light:"dramatic rim light", palette:"sunset orange & pink", camera:"slight low-angle hero",
   mood:"determined", extra:"metallic highlights, high clarity", neg:"text, logo"}
];

/* ---------- Build preset chips ---------- */
const bar = $("presetBar");
PRESETS.forEach(p=>{
  const b = document.createElement("button");
  b.className = "chip";
  b.textContent = p.label;
  b.addEventListener("click", ()=>applyPreset(p));
  bar.appendChild(b);
});
$("clearAll").addEventListener("click", ()=>{
  document.querySelectorAll("select,input[type=text]").forEach(el=>{
    if(el.id==="style") { el.value="Chibi"; return; }
    if(el.tagName==="SELECT") el.value="";
    if(el.type==="text") el.value="";
  });
  $("status").textContent="Cleared.";
  saveToURL();
});

/* ---------- Apply preset ---------- */
function setVal(id,val){ if($(id)) $(id).value = val || ""; }
function applyPreset(p){
  setVal("gender", p.gender);
  setVal("age", p.age); setVal("skin", p.skin);
  setVal("hair", p.hair); setVal("outfit", p.outfit);
  setVal("shoes", p.shoes); setVal("pose", p.pose);
  setVal("bg", p.bg); setVal("light", p.light);
  setVal("palette", p.palette); setVal("camera", p.camera);
  setVal("mood", p.mood); setVal("extra", p.extra);
  setVal("neg", p.neg); $("style").value = "Chibi";
  $("status").textContent = "Preset applied: " + p.label;
  saveToURL();
}

/* ---------- Prompt builder ---------- */
function sentence(parts){ return parts.filter(Boolean).join(", "); }
function sentenceEnd(s){ return s ? (s.endsWith(".") ? s : s+".") : ""; }

function buildPrompt(){
  const gender  = $("gender").value;
  const style   = $("style").value || "Chibi";
  const age     = $("age").value, skin = $("skin").value;
  const hair    = $("hair").value, outfit = $("outfit").value;
  const shoes   = $("shoes").value, pose = $("pose").value;
  const bg      = $("bg").value, light = $("light").value;
  const palette = $("palette").value, camera = $("camera").value;
  const mood    = $("mood").value;
  const extra   = $("extra").value, neg = $("neg").value;

  const who = sentence([gender || "Chibi character", age, skin && (skin+" skin")]);
  const look = sentence([hair && (hair+" hair"), outfit, shoes]);
  const scene = sentence([bg, camera, pose, light, palette]);
  const quality = "clean cel shading, bold lines, crisp composition, high clarity, print-ready PNG, no text";

  const text = [
    `${style} ${who} ‚Äî ${sentence([look, mood])}.`,
    sentenceEnd(scene),
    sentenceEnd(extra),
    quality+"."
  ].join(" ");

  const negative = neg ? ` Negative prompt: ${neg}.` : "";

  return (text + negative).trim();
}

/* ---------- Buttons ---------- */
$("genBtn").addEventListener("click", ()=>{
  $("out").value = buildPrompt();
  $("status").textContent = "Prompt generated.";
  saveToURL();
});
$("copyBtn").addEventListener("click", async ()=>{
  const v = $("out").value.trim();
  if(!v){ $("out").value = buildPrompt(); }
  await navigator.clipboard.writeText($("out").value);
  $("status").textContent = "Copied to clipboard!";
});
$("dlBtn").addEventListener("click", ()=>{
  const blob = new Blob([$("out").value || buildPrompt()], {type:"text/plain"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "chibi_prompt.txt";
  a.click();
  URL.revokeObjectURL(a.href);
});
$("shareBtn").addEventListener("click", ()=>{
  saveToURL();
  navigator.clipboard.writeText(location.href);
  $("status").textContent = "Share link copied!";
});

/* ---------- Deep-link (share URL) ---------- */
const FIELDS = ["gender","style","age","skin","hair","outfit","shoes","pose","bg","light","palette","camera","mood","extra","neg"];
function saveToURL(){
  const data = {};
  FIELDS.forEach(id=>data[id] = $(id).value || "");
  const q = new URLSearchParams(data).toString();
  history.replaceState(null,"","?"+q);
}
(function loadFromURL(){
  const q = new URLSearchParams(location.search);
  let any=false;
  FIELDS.forEach(id=>{
    const v = q.get(id); if(v){ $(id).value = v; any=true; }
  });
  if(any){ $("status").textContent="Loaded from link."; }
})();

/* ---------- Generate on first load for convenience ---------- */
$("out").value = buildPrompt();
</script>
</body>
</html>
